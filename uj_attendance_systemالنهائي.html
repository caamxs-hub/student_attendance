<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨ - Ø¬Ø§Ù…Ø¹Ø© </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4A90E2 0%, #63B3ED 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        .header {
            background: rgb(255, 255, 255);
            padding: 25px 35px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #4A90E2, #63B3ED, #4A90E2);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logo-container img {
            height: 80px;
            width: auto;
        }
        
        .header h1 { 
            color: #2C5282; 
            font-size: 2.2em; 
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .header p { 
            color: #4A5568; 
            font-size: 1.05em;
            margin-bottom: 15px;
        }
        
        .user-info {
            background: linear-gradient(135deg, #4A90E2 0%, #63B3ED 100%);
            color: white;
            padding: 12px 28px;
            border-radius: 25px;
            margin-top: 18px;
            display: inline-block;
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
        }
        
        .nav-tabs {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 22px;
        }
        
        .nav-tabs button {
            padding: 13px 28px;
            background: #4A90E2;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.25);
        }
        
        .nav-tabs button:hover {
            background: #2C5282;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
        }
        
        .nav-tabs button.active {
            background: #2C5282;
            box-shadow: 0 6px 20px rgba(44, 82, 130, 0.5);
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .card {
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 10px 35px rgba(0,0,0,0.12);
            margin-bottom: 25px;
        }
        
        .card h2 { 
            color: #2C5282; 
            margin-bottom: 28px; 
            font-size: 1.75em;
            border-bottom: 3px solid #4A90E2;
            padding-bottom: 12px;
            font-weight: 700;
        }
        
        .form-group { margin-bottom: 22px; }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2D3748;
            font-weight: 600;
            font-size: 14.5px;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 13px 16px;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s;
            background: #F7FAFC;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4A90E2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.15);
            background: white;
        }
        
        .btn {
            padding: 13px 32px;
            background: #4A90E2;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            margin: 5px;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.25);
        }
        
        .btn:hover {
            background: #2C5282;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.35);
        }
        
        .btn-danger { 
            background: #E53E3E;
            box-shadow: 0 4px 12px rgba(229, 62, 62, 0.25);
        }
        .btn-danger:hover { 
            background: #C53030;
            box-shadow: 0 6px 20px rgba(229, 62, 62, 0.35);
        }
        
        .btn-success { 
            background: #38A169;
            box-shadow: 0 4px 12px rgba(56, 161, 105, 0.25);
        }
        .btn-success:hover { 
            background: #2F855A;
            box-shadow: 0 6px 20px rgba(56, 161, 105, 0.35);
        }
        
        #qrcode {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            padding: 30px;
            background: #F7FAFC;
            border-radius: 20px;
            border: 3px dashed #4A90E2;
        }
        
        #video {
            width: 100%;
            max-width: 600px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        canvas { display: none; }
        
        .alert {
            padding: 18px 22px;
            border-radius: 12px;
            margin: 20px 0;
            font-weight: 600;
            font-size: 15px;
        }
        
        .alert-success {
            background: #C6F6D5;
            color: #22543D;
            border: 2px solid #9AE6B4;
        }
        
        .alert-danger {
            background: #FED7D7;
            color: #742A2A;
            border: 2px solid #FC8181;
        }
        
        .alert-warning {
            background: #FEEBC8;
            color: #7C2D12;
            border: 2px solid #F6AD55;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #4A90E2 0%, #63B3ED 100%);
            color: white;
            padding: 35px;
            border-radius: 18px;
            text-align: center;
            box-shadow: 0 12px 30px rgba(74, 144, 226, 0.3);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 40px rgba(74, 144, 226, 0.4);
        }
        
        .stat-card h3 { font-size: 2.8em; margin-bottom: 12px; font-weight: 700; }
        .stat-card p { font-size: 1.15em; opacity: 0.95; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            border-radius: 12px;
            overflow: hidden;
        }
        
        table th {
            background: #4A90E2;
            color: white;
            padding: 16px;
            text-align: right;
            font-weight: 600;
            font-size: 15px;
        }
        
        table td {
            padding: 14px 16px;
            border-bottom: 1px solid #E2E8F0;
            text-align: right;
            font-size: 14.5px;
            background: white;
        }
        
        table tr:hover td { background: #F7FAFC; }
        
        .progress-bar {
            background: #E2E8F0;
            border-radius: 10px;
            height: 24px;
            overflow: hidden;
            margin: 8px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4A90E2 0%, #63B3ED 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12.5px;
            font-weight: 700;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 22px 40px;
            border-radius: 15px;
            box-shadow: 0 18px 50px rgba(0,0,0,0.25);
            z-index: 1000;
            display: none;
            animation: slideDown 0.4s ease;
            min-width: 320px;
            text-align: center;
            font-weight: 600;
        }
        
        @keyframes slideDown {
            from {
                transform: translateX(-50%) translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        .qr-info {
            background: #EDF2F7;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border-right: 5px solid #4A90E2;
        }
        
        .login-screen {
            max-width: 480px;
            margin: 80px auto;
        }
        
        .login-card {
            background: white;
            padding: 45px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        
        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-logo img {
            height: 100px;
            width: auto;
        }
        
        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: 1fr; }
            .nav-tabs { flex-direction: column; }
            .nav-tabs button { width: 100%; }
            .header h1 { font-size: 1.65em; }
            .logo-container img { height: 60px; }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 150'%3E%3Ctext x='100' y='75' font-size='48' fill='%234A90E2' text-anchor='middle' font-weight='bold' font-family='Arial'%3EØ¬Ø§Ù…Ø¹Ø© %3C/text%3E%3C/svg%3E" alt="Ø¬Ø§Ù…Ø¹Ø© ">
            </div>
            <h1 style="color: #2C5282; text-align: center; margin-bottom: 30px; font-size: 1.8em;">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" id="loginUsername" value="sami">
            </div>
            <div class="form-group">
                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="loginPassword" value="sami4141">
            </div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <select id="loginUserType">
                    <option value="sami">Ù…Ø¯ÙŠØ±</option>
                    <option value="Tareq">Ù…Ø­Ø§Ø¶Ø±</option>
                    <option value="student">Ø·Ø§Ù„Ø¨</option>
                </select>
            </div>
            <button class="btn btn-success" style="width: 100%;" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            <div style="margin-top: 20px; padding: 15px; background: #EBF8FF; border-radius: 12px; font-size: 13.5px; border: 2px solid #4A90E2;">
                <strong>Ø­Ø³Ø§Ø¨Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©:</strong><br>
                sami / sami4141 (Ù…Ø¯ÙŠØ±)<br>
                Tareq / 123 (Ù…Ø­Ø§Ø¶Ø±)<br>
                stu1 / stu (Ø·Ø§Ù„Ø¨)<br>
                stu2 / stu (Ø·Ø§Ù„Ø¨)<br>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="mainScreen" class="container" style="display: none;">
        <div class="header">
            <div class="logo-container">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 150'%3E%3Ctext x='100' y='75' font-size='48' fill='%234A90E2' text-anchor='middle' font-weight='bold' font-family='Arial'%3EØ¬Ø§Ù…Ø¹Ø© %3C/text%3E%3C/svg%3E" alt="Ø¬Ø§Ù…Ø¹Ø© ">
            </div>
            <h1>ğŸ“ Ù†Ø¸Ø§Ù… Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¨Ù€ QR Code</h1>
            <p>Ø¬Ø§Ù…Ø¹Ø©  - Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨</p>
            
            <div class="user-info" id="userInfo">
                <strong id="userName"></strong> | 
                <button onclick="logout()" style="background: none; border: none; color: white; cursor: pointer; font-weight: bold; text-decoration: underline;">
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                </button>
            </div>
            <!--Ø§Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ§Ø¨ Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø®ÙŠØ© -->
            <div class="nav-tabs">
                <button onclick="showTab('Tareq')" data-roles="admin,instructor" class="active">ğŸ“‹ ØªÙˆÙ„ÙŠØ¯ QR</button>
                <button onclick="showTab('student')" data-roles="admin,student">ğŸ“± Ù…Ø³Ø­ QR</button>
                <button onclick="showTab('dashboard')" data-roles="admin,instructor">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
                <button onclick="showTab('reports')" data-roles="admin">ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
                <button onclick="showTab('students')" data-roles="admin,instructor,student">ğŸ‘¥ Ø§Ù„Ø·Ù„Ø§Ø¨</button>
            </div>
        </div>

        <!-- ØªÙˆÙ„ÙŠØ¯ QR -->
        <div id="Tareq" class="tab-content">
            <div class="card">
                <h2>ğŸ“‹ ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² QR Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø©</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø±</label>
                        <input type="text" id="courseName" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨" value="Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ù‚Ø³Ù… / Ø§Ù„Ø´Ø¹Ø¨Ø©</label>
                        <input type="text" id="department" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨ - Ø´Ø¹Ø¨Ø© Ø£" value="Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨ - Ø´Ø¹Ø¨Ø© Ø£">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                        <input type="date" id="lectureDate">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„ÙˆÙ‚Øª</label>
                        <input type="time" id="lectureTime">
                    </div>
                    
                    <div class="form-group">
                        <label>Ù…Ø¯Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ø¯Ù‚Ø§Ø¦Ù‚)</label>
                        <input type="number" id="validity" value="15" min="5" max="60">
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="generateQR()">ğŸ” ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² QR</button>
                <button class="btn" onclick="clearQR()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø²</button>
                
                <div id="qrcode"></div>
                
                <div id="qrInfo" class="qr-info" style="display: none;">
                    <h3 style="color: #2C5282; margin-bottom: 15px;">â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù…Ø²</h3>
                    <p id="qrDetails" style="line-height: 1.9; font-size: 14.5px;"></p>
                </div>
            </div>
        </div>

        <!-- Ù…Ø³Ø­ QR -->
        <div id="student" class="tab-content">
            <div class="card">
                <h2>ğŸ“± Ù…Ø³Ø­ Ø±Ù…Ø² QR Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
                        <input type="text" id="studentId" placeholder="Ù…Ø«Ø§Ù„: 1234" value="1234" oninput="autoFillStudentName()">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
                        <input type="text" id="studentName" placeholder="Ø³ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹" value="Ø³Ø§Ù…ÙŠ Ø¨Ù† Ø­Ù…ÙŠØ¯ Ø§Ù„Ø´ÙŠØ®" readonly style="background: #EDF2F7;">
                    </div>
                </div>
                
                <div id="studentInfo" style="display: none; padding: 15px; background: #EBF8FF; border-radius: 12px; margin-bottom: 20px; border-right: 4px solid #4A90E2;">
                    <strong style="color: #2C5282;">ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨:</strong>
                    <div id="studentDetails" style="margin-top: 10px; color: #2D3748; line-height: 1.8;"></div>
                </div>
                
                <button class="btn btn-success" onclick="startScanner()">ğŸ“· ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
                <button class="btn btn-danger" onclick="stopScanner()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
                <button class="btn" onclick="testScan()">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† ÙƒØ§Ù…ÙŠØ±Ø§</button>
                
                <div style="margin-top: 30px; text-align: center;" id="qrcodeShow">
                    <video id="video" autoplay playsinline></video>
                </div>
                
                <div id="scanResult"></div>
            </div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div id="dashboard" class="tab-content">
            <div class="card">
                <h2>ğŸ“Š Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø£Ø¹Ø¶Ø§Ø¡ Ù‡ÙŠØ¦Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ³</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="totalStudents">5</h3>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="presentToday">0</h3>
                        <p>Ø§Ù„Ø­Ø§Ø¶Ø±ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="absentToday">5</h3>
                        <p>Ø§Ù„ØºØ§Ø¦Ø¨ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="attendanceRate">0%</h3>
                        <p>Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±</p>
                    </div>
                </div>
                
                <h3 style="margin: 30px 0 15px; color: #2C5282; font-size: 1.45em;">ğŸ“ˆ ØªÙØ§ØµÙŠÙ„ Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨</h3>
                
                <div style="margin-bottom: 20px;">
                    <label style="font-weight: 600; color: #2D3748; margin-bottom: 8px; display: block;">ğŸ” Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹:</label>
                    <input type="text" id="searchStudent" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø±Ù‚Ù…Ù‡..." 
                           oninput="filterStudentsTable()" 
                           style="width: 100%; padding: 12px 16px; border: 2px solid #E2E8F0; border-radius: 12px; font-size: 15px;">
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„ØºÙŠØ§Ø¨</th>
                            <th>Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="attendanceTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
        <div id="reports" class="tab-content">
            <div class="card">
                <h2>ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="reportTotal">5</h3>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="reportAvg">85%</h3>
                        <p>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø­Ø¶ÙˆØ±</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="reportAtRisk">1</h3>
                        <p>Ø·Ù„Ø§Ø¨ Ù…Ù‡Ø¯Ø¯ÙˆÙ†</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="reportExcellent">3</h3>
                        <p>Ø·Ù„Ø§Ø¨ Ù…ØªÙ…ÙŠØ²ÙˆÙ†</p>
                    </div>
                </div>

                <button class="btn btn-success" onclick="exportReport()">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
            </div>
        </div>

        <!-- Ø§Ù„Ø·Ù„Ø§Ø¨ -->
        <div id="students" class="tab-content">
            <div class="card">
                <h2>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                            <th>Ø§Ù„Ù‚Ø³Ù…</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        let currentUser = null;
        let attendanceData = [];
    // Ø§Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨
        let studentsData = [
            {id: '1234', name: 'Ø³Ø§Ù…ÙŠ Ø¨Ù† Ø­Ù…ÙŠØ¯ Ø§Ù„Ø´ÙŠØ®', email: 's1234@sami.edu.sa', dept: 'Ù…Ø³Ø§Ø¹Ø¯ Ø¥Ø¯Ø§Ø±ÙŠ', present: 0, absent: 0},
            {id: '1235', name: 'Ø·Ø§Ø±Ù‚ Ø¨Ù† Ø´Ù„Ø§Ø­ Ø§Ù„Ø³Ù„Ù…ÙŠ', email: 't1235@sami.edu.sa', dept: 'Ø¹Ù„Ø§Ù‚Ø§Øª Ø¹Ø§Ù…Ø©', present: 0, absent: 0},
            {id: '1236', name: 'Ù…Ø§Ù†Ø¹ Ø¨Ù† Ø´Ù„ÙŠÙˆÙŠØ­ Ø§Ù„Ù‚Ø«Ø§Ù…ÙŠ', email: 'm1236@sami.edu.sa', dept: 'Ù…Ø¹Ù„Ù… Ø§Ø­ÙŠØ§Ø¡', present: 0, absent: 0},
            {id: '1237', name: 'Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø§Ø­Ù…Ø¯ÙŠ', email: 'a1237@sami.edu.sa', dept: 'Ù†Ø¸Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª', present: 0, absent: 0},
            {id: '1238', name: 'Ø·Ù„Ø§Ù„ Ø¨Ù† Ø¹Ø§Ø¨Ø¯ Ø§Ù„ØµØ¨Ø­ÙŠ', email: 't1238@sami.edu.sa', dept: 'Ø¹Ù„Ø§Ù‚Ø§Øª Ø¹Ø§Ù…Ø©', present: 0, absent: 0}
        ]; 
        
        let videoStream = null;
        let scanningActive = false;
        let lastQRData = null;

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
        function autoFillStudentName() {
            const studentId = document.getElementById('studentId').value.trim();
            const studentNameInput = document.getElementById('studentName');
            const studentInfo = document.getElementById('studentInfo');
            const studentDetails = document.getElementById('studentDetails');
            
            if (!studentId) {
                studentNameInput.value = '';
                studentInfo.style.display = 'none';
                return;
            }
            
            const student = studentsData.find(s => s.id === studentId);
            
            if (student) {
                studentNameInput.value = student.name;
                studentInfo.style.display = 'block';
                
                const total = student.present + student.absent;
                const rate = total > 0 ? ((student.present / total) * 100).toFixed(1) : 0;
                
                studentDetails.innerHTML = `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> ${student.email}</div>
                        <div><strong>ğŸ¢ Ø§Ù„Ù‚Ø³Ù…:</strong> ${student.dept}</div>
                        <div><strong>âœ… Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> ${student.present} Ù…Ø±Ø©</div>
                        <div><strong>âŒ Ø§Ù„ØºÙŠØ§Ø¨:</strong> ${student.absent} Ù…Ø±Ø©</div>
                        <div><strong>ğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> <span style="color: ${rate >= 75 ? '#38A169' : rate >= 50 ? '#DD6B20' : '#E53E3E'}; font-weight: bold;">${rate}%</span></div>
                        <div><strong>ğŸ¯ Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span style="color: ${rate >= 75 ? '#38A169' : rate >= 50 ? '#DD6B20' : '#E53E3E'}; font-weight: bold;">${rate >= 75 ? 'Ù…Ù…ØªØ§Ø²' : rate >= 50 ? 'Ù…ØªÙˆØ³Ø·' : 'Ù…Ù‡Ø¯Ø¯'}</span></div>
                    </div>
                `;
            } else {
                studentNameInput.value = '';
                studentInfo.style.display = 'block';
                studentDetails.innerHTML = '<span style="color: #E53E3E;">âš ï¸ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</span>';
            }
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨
        function filterStudentsTable() {
            const searchTerm = document.getElementById('searchStudent').value.toLowerCase().trim();
            const rows = document.querySelectorAll('#attendanceTableBody tr');
            
            rows.forEach(row => {
                const studentId = row.cells[0].textContent.toLowerCase();
                const studentName = row.cells[1].textContent.toLowerCase();
                
                if (studentId.includes(searchTerm) || studentName.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // ÙˆØ¸ÙŠÙØ© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨
        function adjustAttendance(studentId, type) {
            const student = studentsData.find(s => s.id === studentId);
            if (!student) return;
            
            if (type === 'present') {
                student.present++;
            } else if (type === 'absent') {
                student.absent++;
            } else if (type === 'remove-present' && student.present > 0) {
                student.present--;
            } else if (type === 'remove-absent' && student.absent > 0) {
                student.absent--;
            }
            
            updateDashboard();
            autoFillStudentName(); // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØªÙˆØ­Ø§Ù‹
            showNotification('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±', 'success');
        }

        // function login() {
        //     const username = document.getElementById('loginUsername').value;
        //     const password = document.getElementById('loginPassword').value;
        //     const userType = document.getElementById('loginUserType').value;

        //     const users = {
        //         sami: { password: 'sami4141', name: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…', type: 'sami' },
        //         Tareq: { password: '123', name: 'Ø¯. Ø£Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ ', type: 'Tareq' }
        //     };

        //     if (users[username] && users[username].password === password) {
        //         currentUser = { username, ...users[username] };
        //         document.getElementById('loginScreen').style.display = 'none';
        //         document.getElementById('mainScreen').style.display = 'block';
        //         document.getElementById('userName').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}`;
                
        //         const today = new Date();
        //         document.getElementById('lectureDate').valueAsDate = today;
        //         const hours = String(today.getHours()).padStart(2, '0');
        //         const minutes = String(today.getMinutes()).padStart(2, '0');
        //         document.getElementById('lectureTime').value = `${hours}:${minutes}`;
                
        //         updateDashboard();
        //         updateStudentsTable();
        //         showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        //     } else {
        //         showNotification('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
        //     }
        // }

        // function logout() {
        //     currentUser = null;
        //     document.getElementById('loginScreen').style.display = 'block';
        //     document.getElementById('mainScreen').style.display = 'none';
        //     showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'success');
        // }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tabs button').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'students') updateStudentsTable();
        }

        function generateQR() {
            const courseName = document.getElementById('courseName').value;
            const department = document.getElementById('department').value;
            const lectureDate = document.getElementById('lectureDate').value;
            const lectureTime = document.getElementById('lectureTime').value;
            const validity = document.getElementById('validity').value;

            if (!courseName || !department || !lectureDate || !lectureTime) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }

            const secretKey = Math.random().toString(36).substring(2, 15);
            const expiryTime = new Date(new Date().getTime() + validity * 60000);
            
            const qrData = {
                course: courseName,
                department: department,
                date: lectureDate,
                time: lectureTime,
                secretKey: secretKey,
                expiry: expiryTime.toISOString(),
                timestamp: new Date().toISOString()
            };

            lastQRData = qrData;

            const qrContainer = document.getElementById('qrcode');
            const qrContainerShow = document.getElementById('qrcodeShow');
            qrContainer.innerHTML = '';
            
            try {
                const canvas = document.createElement('canvas');
                const canvas2 = document.createElement('canvas');
                const qr = new QRious({
                    element: canvas,
                    value: JSON.stringify(qrData),
                    size: 350,
                    background: '#ffffff',
                    foreground: '#4A90E2',
                    level: 'H'
                });
                const qr2 = new QRious({
                    element: canvas2,
                    value: JSON.stringify(qrData),
                    size: 350,
                    background: '#ffffff',
                    foreground: '#4A90E2',
                    level: 'H'
                });
                
                canvas.style.border = '5px solid #4A90E2';
                canvas.style.borderRadius = '15px';
                canvas.style.boxShadow = '0 10px 30px rgba(74, 144, 226, 0.25)';
                canvas.style.display = "block"
                canvas2.style.border = '5px solid #4A90E2';
                canvas2.style.borderRadius = '15px';
                canvas2.style.boxShadow = '0 10px 30px rgba(74, 144, 226, 0.25)';
                canvas2.style.display = "block"
                qrContainer.appendChild(canvas);
                qrContainerShow.append(canvas2);
                
                showNotification('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                console.error('Error generating QR:', error);
                qrContainer.innerHTML = `
                    <div style="padding: 40px; background: #C6F6D5; border-radius: 15px; text-align: center; border: 3px solid #38A169;">
                        <h3 style="color: #22543D; margin-bottom: 20px;">âœ… ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©</h3>
                        <p style="color: #22543D; font-size: 16px; margin-bottom: 15px;">
                            Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ù†Ø¬Ø§Ø­! Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±:
                        </p>
                        <ol style="text-align: right; color: #22543D; line-height: 2;">
                            <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ "Ù…Ø³Ø­ QR"</li>
                            <li>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: 1234</li>
                            <li>Ø§Ø¶ØºØ· "Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† ÙƒØ§Ù…ÙŠØ±Ø§"</li>
                        </ol>
                        <button onclick="showTab('student'); document.querySelectorAll('.nav-tabs button')[1].click();" 
                                style="margin-top: 20px; padding: 12px 30px; background: #38A169; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù…Ø³Ø­ QR
                        </button>
                    </div>
                `;
                showNotification('âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© - Ø§Ø³ØªØ®Ø¯Ù… "Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† ÙƒØ§Ù…ÙŠØ±Ø§"', 'success');
            }

            document.getElementById('qrInfo').style.display = 'block';
            document.getElementById('qrDetails').innerHTML = `
                <strong>ğŸ“š Ø§Ù„Ù…Ù‚Ø±Ø±:</strong> ${courseName}<br>
                <strong>ğŸ¢ Ø§Ù„Ù‚Ø³Ù…:</strong> ${department}<br>
                <strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${lectureDate}<br>
                <strong>ğŸ• Ø§Ù„ÙˆÙ‚Øª:</strong> ${lectureTime}<br>
                <strong>â° Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©:</strong> ${validity} Ø¯Ù‚ÙŠÙ‚Ø©<br>
                <strong>ğŸ”‘ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ:</strong> ${secretKey}<br>
                <strong>ğŸ“Œ ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ:</strong> ${expiryTime.toLocaleString('ar-SA')}
            `;
        }

        function clearQR() {
            document.getElementById('qrcode').innerHTML = '';
            document.getElementById('qrcodeShow').innerHTML = '';
            document.getElementById('qrInfo').style.display = 'none';
            lastQRData = null;
        }

        function startScanner() {
            const studentId = document.getElementById('studentId').value;
            const studentName = document.getElementById('studentName').value;

            if (!studentId || !studentName) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆØ§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');

            navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                .then(stream => {
                    videoStream = stream;
                    video.srcObject = stream;
                    video.play();
                    scanningActive = true;
                    showNotification('ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§', 'success');

                    function tick() {
                        if (video.readyState === video.HAVE_ENOUGH_DATA && scanningActive) {
                            canvas.height = video.videoHeight;
                            canvas.width = video.videoWidth;
                            context.drawImage(video, 0, 0, canvas.width, canvas.height);
                            
                            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                            const code = jsQR(imageData.data, imageData.width, imageData.height);

                            if (code) {
                                processQRCode(code.data, studentId, studentName);
                                return;
                            }
                        }
                        if (scanningActive) requestAnimationFrame(tick);
                    }
                    requestAnimationFrame(tick);
                })
                .catch(err => {
                    showNotification('ÙØ´Ù„ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ' + err.message, 'error');
                });
        }

        function stopScanner() {
            scanningActive = false;
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
            document.getElementById('video').srcObject = null;
            showNotification('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§', 'success');
        }

        function testScan() {
            if (!lastQRData) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² QR Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† ØªØ¨ÙˆÙŠØ¨ "ØªÙˆÙ„ÙŠØ¯ QR"', 'error');
                return;
            }
            
            const studentId = document.getElementById('studentId').value;
            const studentName = document.getElementById('studentName').value;
            
            if (!studentId || !studentName) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆØ§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨', 'error');
                return;
            }
            
            processQRCode(JSON.stringify(lastQRData), studentId, studentName);
        }

        function processQRCode(qrData, studentId, studentName) {
            stopScanner();
            
            try {
                const data = JSON.parse(qrData);
                const now = new Date();
                const expiry = new Date(data.expiry);

                if (now > expiry) {
                    document.getElementById('scanResult').innerHTML = 
                        '<div class="alert alert-danger">âŒ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø±Ù…Ø² QR</div>';
                    showNotification('âŒ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø±Ù…Ø²', 'error');
                    return;
                }

                const location = {
                    latitude: 21.4225,
                    longitude: 39.8262
                };

                submitAttendance({
                    studentId: studentId,
                    studentName: studentName,
                    course: data.course,
                    department: data.department,
                    date: data.date,
                    time: data.time,
                    scanTime: new Date().toLocaleString('ar-SA'),
                    location: location
                });

            } catch (error) {
                document.getElementById('scanResult').innerHTML = 
                    '<div class="alert alert-danger">âŒ Ø±Ù…Ø² QR ØºÙŠØ± ØµØ§Ù„Ø­</div>';
                showNotification('âŒ Ø±Ù…Ø² QR ØºÙŠØ± ØµØ§Ù„Ø­', 'error');
            }
        }

        function submitAttendance(record) {
            const student = studentsData.find(s => s.id === record.studentId);
            
            if (!student) {
                showNotification('âŒ Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
                return;
            }

            const today = new Date().toISOString().split('T')[0];
            const existingRecord = attendanceData.find(
                a => a.studentId === record.studentId && a.date === today
            );

            if (existingRecord) {
                document.getElementById('scanResult').innerHTML = 
                    '<div class="alert alert-warning">âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±Ùƒ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…!</div>';
                showNotification('âš ï¸ ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹', 'warning');
                return;
            }

            attendanceData.push({
                ...record,
                date: today,
                id: attendanceData.length + 1
            });

            student.present++;
            
            const total = student.present + student.absent;
            const rate = total > 0 ? ((student.present / total) * 100).toFixed(1) : 0;

            document.getElementById('scanResult').innerHTML = `
                <div class="alert alert-success">
                    âœ… <strong>ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!</strong><br><br>
                    <strong>ğŸ‘¤ Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> ${record.studentName} (${record.studentId})<br>
                    <strong>ğŸ“š Ø§Ù„Ù…Ù‚Ø±Ø±:</strong> ${record.course}<br>
                    <strong>ğŸ¢ Ø§Ù„Ù‚Ø³Ù…:</strong> ${record.department}<br>
                    <strong>ğŸ• ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</strong> ${record.scanTime}<br>
                    <strong>ğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> ${rate}%<br>
                    <strong>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ âœ”
                </div>
            `;
            
            showNotification(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± ${record.studentName} Ø¨Ù†Ø¬Ø§Ø­! (${rate}%)`, 'success');
            updateDashboard();
        }

        function updateDashboard() {
            const today = new Date().toISOString().split('T')[0];
            const todayAttendance = attendanceData.filter(a => a.date === today);
            
            const totalStudents = studentsData.length;
            const presentToday = todayAttendance.length;
            const absentToday = totalStudents - presentToday;
            const rate = totalStudents > 0 ? ((presentToday / totalStudents) * 100).toFixed(1) : 0;

            document.getElementById('totalStudents').textContent = totalStudents;
            document.getElementById('presentToday').textContent = presentToday;
            document.getElementById('absentToday').textContent = absentToday;
            document.getElementById('attendanceRate').textContent = rate + '%';

            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = '';

            studentsData.forEach(student => {
                const total = student.present + student.absent;
                const studentRate = total > 0 ? ((student.present / total) * 100).toFixed(1) : 0;
                const statusColor = studentRate >= 75 ? '#38A169' : studentRate >= 50 ? '#DD6B20' : '#E53E3E';
                const statusText = studentRate >= 75 ? 'âœ“ Ù…Ù…ØªØ§Ø²' : studentRate >= 50 ? 'âš  Ù…ØªÙˆØ³Ø·' : 'âŒ Ù…Ù‡Ø¯Ø¯';

                tbody.innerHTML += `
                    <tr>
                        <td>${student.id}</td>
                        <td>${student.name}</td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button onclick="adjustAttendance('${student.id}', 'remove-present')" 
                                        style="padding: 4px 8px; background: #FC8181; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;" 
                                        ${student.present === 0 ? 'disabled' : ''}>âˆ’</button>
                                <span style="font-weight: bold; min-width: 30px; text-align: center;">${student.present}</span>
                                <button onclick="adjustAttendance('${student.id}', 'present')" 
                                        style="padding: 4px 8px; background: #48BB78; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">+</button>
                            </div>
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button onclick="adjustAttendance('${student.id}', 'remove-absent')" 
                                        style="padding: 4px 8px; background: #FC8181; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;" 
                                        ${student.absent === 0 ? 'disabled' : ''}>âˆ’</button>
                                <span style="font-weight: bold; min-width: 30px; text-align: center;">${student.absent}</span>
                                <button onclick="adjustAttendance('${student.id}', 'absent')" 
                                        style="padding: 4px 8px; background: #48BB78; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">+</button>
                            </div>
                        </td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${studentRate}%; background: linear-gradient(90deg, ${statusColor}, ${statusColor});">${studentRate}%</div>
                            </div>
                        </td>
                        <td style="color: ${statusColor}; font-weight: bold;">${statusText}</td>
                        <td>
                            <button onclick="viewStudentHistory('${student.id}')" 
                                    style="padding: 6px 12px; background: #4A90E2; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 13px;">
                                ğŸ“‹ Ø§Ù„Ø³Ø¬Ù„
                            </button>
                        </td>
                    </tr>
                `;
            });

            const atRisk = studentsData.filter(s => {
                const t = s.present + s.absent;
                return t > 0 && ((s.present / t) * 100) < 75;
            }).length;

            const excellent = studentsData.filter(s => {
                const t = s.present + s.absent;
                return t > 0 && ((s.present / t) * 100) >= 90;
            }).length;

            document.getElementById('reportTotal').textContent = totalStudents;
            document.getElementById('reportAvg').textContent = rate + '%';
            document.getElementById('reportAtRisk').textContent = atRisk;
            document.getElementById('reportExcellent').textContent = excellent;
        }

        // Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨
        function viewStudentHistory(studentId) {
            const student = studentsData.find(s => s.id === studentId);
            if (!student) return;
            
            const studentRecords = attendanceData.filter(a => a.studentId === studentId);
            const total = student.present + student.absent;
            const rate = total > 0 ? ((student.present / total) * 100).toFixed(1) : 0;
            
            let historyHTML = `
                <div style="padding: 20px; background: white; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                    <h3 style="color: #2C5282; margin-bottom: 15px;">ğŸ“‹ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ø§Ù„Ø¨</h3>
                    <div style="background: #EDF2F7; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <strong>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</strong> ${student.name}<br>
                        <strong>ğŸ†” Ø§Ù„Ø±Ù‚Ù…:</strong> ${student.id}<br>
                        <strong>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> ${student.email}<br>
                        <strong>âœ… Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> ${student.present} | <strong>âŒ Ø§Ù„ØºÙŠØ§Ø¨:</strong> ${student.absent}<br>
                        <strong>ğŸ“Š Ø§Ù„Ù†Ø³Ø¨Ø©:</strong> <span style="color: ${rate >= 75 ? '#38A169' : rate >= 50 ? '#DD6B20' : '#E53E3E'}; font-weight: bold;">${rate}%</span>
                    </div>
            `;
            
            if (studentRecords.length > 0) {
                historyHTML += '<h4 style="color: #2C5282; margin: 15px 0;">Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±:</h4><ul style="list-style: none; padding: 0;">';
                studentRecords.forEach(record => {
                    historyHTML += `
                        <li style="padding: 10px; background: #F7FAFC; margin-bottom: 8px; border-radius: 8px; border-right: 4px solid #4A90E2;">
                            ğŸ“… ${record.date} | ğŸ• ${record.scanTime} | ğŸ“š ${record.course}
                        </li>
                    `;
                });
                historyHTML += '</ul>';
            } else {
                historyHTML += '<p style="color: #718096;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø­Ø¶ÙˆØ± Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
            }
            
            historyHTML += '<button onclick="closeModal()" style="margin-top: 15px; padding: 10px 25px; background: #4A90E2; color: white; border: none; border-radius: 8px; cursor: pointer;">Ø¥ØºÙ„Ø§Ù‚</button></div>';
            
            showModal(historyHTML);
        }

        function showModal(content) {
            let modal = document.getElementById('customModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'customModal';
                modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px;';
                document.body.appendChild(modal);
            }
            modal.innerHTML = content;
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('customModal');
            if (modal) modal.style.display = 'none';
        }

        function updateStudentsTable() {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';

            studentsData.forEach(student => {
                tbody.innerHTML += `
                    <tr>
                        <td>${student.id}</td>
                        <td>${student.name}</td>
                        <td>${student.email}</td>
                        <td>${student.dept}</td>
                    </tr>
                `;
            });
        }

        function exportReport() {
            const today = new Date().toLocaleDateString('ar-SA');
            let report = `ØªÙ‚Ø±ÙŠØ± Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨ - Ø¬Ø§Ù…Ø¹Ø© \n`;
            report += `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${today}\n`;
            report += `${'='.repeat(50)}\n\n`;
            
            report += `ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©:\n`;
            report += `- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨: ${studentsData.length}\n`;
            report += `- Ø§Ù„Ø­Ø§Ø¶Ø±ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…: ${document.getElementById('presentToday').textContent}\n`;
            report += `- Ø§Ù„ØºØ§Ø¦Ø¨ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…: ${document.getElementById('absentToday').textContent}\n`;
            report += `- Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±: ${document.getElementById('attendanceRate').textContent}\n\n`;
            
            report += `ğŸ‘¥ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨:\n`;
            report += `${'='.repeat(50)}\n`;
            
            studentsData.forEach(student => {
                const total = student.present + student.absent;
                const rate = total > 0 ? ((student.present / total) * 100).toFixed(1) : 0;
                report += `\n${student.name} (${student.id})\n`;
                report += `  - Ø§Ù„Ø­Ø¶ÙˆØ±: ${student.present}\n`;
                report += `  - Ø§Ù„ØºÙŠØ§Ø¨: ${student.absent}\n`;
                report += `  - Ø§Ù„Ù†Ø³Ø¨Ø©: ${rate}%\n`;
            });
            
            report += `\n${'='.repeat(50)}\n`;
            report += `ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨ - Ø¬Ø§Ù…Ø¹Ø© \n`;

            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ØªÙ‚Ø±ÙŠØ±_Ø§Ù„Ø­Ø¶ÙˆØ±_${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            showNotification('âœ… ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const colors = {
                success: '#C6F6D5',
                error: '#FED7D7',
                warning: '#FEEBC8'
            };
            const textColors = {
                success: '#22543D',
                error: '#742A2A',
                warning: '#7C2D12'
            };

            notification.style.background = colors[type] || colors.success;
            notification.style.color = textColors[type] || textColors.success;
            notification.style.border = `3px solid ${textColors[type] || textColors.success}`;
            notification.textContent = message;
            notification.style.display = 'block';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }

        window.addEventListener('beforeunload', function() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
            }
        });

        window.addEventListener('load', function() {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];

            studentsData[0].present = 3; studentsData[0].absent = 1;
            studentsData[1].present = 4; studentsData[1].absent = 0;
            studentsData[2].present = 2; studentsData[2].absent = 2;
            studentsData[3].present = 3; studentsData[3].absent = 1;
            studentsData[4].present = 1; studentsData[4].absent = 3;

            attendanceData.push(
                { id: 1, studentId: '1234', studentName: 'Ø³Ø§Ù…ÙŠ Ø¨Ù† Ø­Ù…ÙŠØ¯ Ø§Ù„Ø´ÙŠØ®', date: yesterdayStr, course: 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨' },
                { id: 2, studentId: '1235', studentName: 'Ø·Ø§Ø±Ù‚ Ø¨Ù† Ø´Ù„Ø§Ø­ Ø§Ù„Ø³Ù„Ù…ÙŠ', date: yesterdayStr, course: 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨' },
                { id: 3, studentId: '1236', studentName: 'Ù…Ø§Ù†Ø¹ Ø¨Ù† Ø´Ù„ÙŠÙˆÙŠØ­ Ø§Ù„Ù‚Ø«Ø§Ù…ÙŠ', date: yesterdayStr, course: 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨' },
                { id: 4, studentId: '1237', studentName: 'Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø§Ø­Ù…Ø¯ÙŠ', date: yesterdayStr, course: 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨' },
                { id: 5, studentId: '1238', studentName: 'Ø·Ù„Ø§Ù„ Ø¨Ù† Ø¹Ø§Ø¨Ø¯ Ø§Ù„ØµØ¨Ø­ÙŠ', date: yesterdayStr, course: 'Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆÙŠØ¨' }
            );
        });
    
// -------------------- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ù‡ Ù„Ù„ÙƒÙˆÙŠÙƒØ² --------------------
function setCookie(name, value, days) {
  const d = new Date();
  d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
  const expires = "expires=" + d.toUTCString();
  document.cookie = `${name}=${encodeURIComponent(value)}; ${expires}; path=/; SameSite=Lax`;
}
function getCookie(name) {
    const cookieArr = document.cookie.split(';');
    for (let c of cookieArr) {
        const pair = c.trim().split('=');
        if (pair[0] === name) return decodeURIComponent(pair.slice(1).join('='));
    }
    return null;
}

function deleteCookie(name) {
    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
}

// -------------------- ØªØ·Ø¨ÙŠÙ‚ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ± --------------------
function applyRolePermissions() {
    const role = getCookie('userRole'); // Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©: 'admin', 'instructor', 'student', Ø§Ù„Ø®.
    // Ø§ÙØªØ±Ø§Ø¶ÙŠ: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙƒÙ„ Ø¥Ù† Ù„Ù… ÙŠÙƒÙ† Ø¯ÙˆØ± Ù…Ø­ÙÙˆØ¸
    document.querySelectorAll('[data-roles]').forEach(el => {
        const roles = el.getAttribute('data-roles').split(',').map(r => r.trim()).filter(r => r);
        if (!role) {
            // Ù„Ø§ Ø¯ÙˆØ± Ù…Ø­ÙÙˆØ¸ => Ù†Ø¸Ù‡Ø± Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ data-roles ÙÙ‚Ø· Ø¥Ø°Ø§ Ø§Ø­ØªÙˆØª 'public'
            // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø®ÙØ§Ø¤Ù‡Ø§. Ù‡Ù†Ø§ Ø³Ø£Ø®ÙÙŠÙ‡Ø§ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† public.
            if (!roles.includes('public')) el.style.display = 'none';
        } else {
            el.style.display = roles.includes(role) ? '' : 'none';
        }
    });

    document.querySelectorAll('[data-hide-roles]').forEach(el => {
        const hideRoles = el.getAttribute('data-hide-roles').split(',').map(r => r.trim()).filter(r => r);
        if (!role) {
            el.style.display = ''; // Ù„Ø§ Ø¯ÙˆØ± Ù…Ø­ÙÙˆØ¸ => Ù†ØªØ±ÙƒÙ‡Ø§ Ø¸Ø§Ù‡Ø±Ø©
        } else {
            el.style.display = hideRoles.includes(role) ? 'none' : '';
        }
    });

    // Ù…Ø«Ø§Ù„: Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª ØªØºÙŠÙŠØ± ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ (active/hidden)
    // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø£Ø²Ø±Ø§Ø± Ù…Ø¹ÙŠÙ†Ø© Ø£ÙŠØ¶Ø§Ù‹ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø¶Ø§ÙØ© class .role-sensitive Ù„Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡Ø§:
    document.querySelectorAll('.role-sensitive').forEach(el => {
        // Ø§ÙØªØ±Ø§Ø¶ÙŠ: Ø¥Ø¸Ù‡Ø§Ø±
        el.style.display = '';
    });

    // Ø¹Ø¯Ù‘Ù„ Ø´Ø±ÙŠØ· Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ø®Ø±Ù‰ Ø¥Ù† Ù„Ø²Ù…
    const currentUserNameEl = document.getElementById('userName');
    if (currentUserNameEl) {
        const name = getCookie('userName');
        if (name) currentUserNameEl.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${name} â€” (${role || 'Ø²Ø§Ø¦Ø±'})`;
        else currentUserNameEl.textContent = role ? `Ù…Ø±Ø­Ø¨Ø§Ù‹ (${role})` : 'Ù…Ø±Ø­Ø¨Ø§Ù‹';
    }
}

// -------------------- ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø­ÙØ¸ role ÙÙŠ Ø§Ù„ÙƒÙˆÙƒÙŠØ² --------------------
function login() {
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    const userType = document.getElementById('loginUserType').value; // Ù‡Ø°Ø§ Ø³ÙŠØ³ØªØ®Ø¯Ù… ÙƒÙ€ role

    // Ø§Ø¶Ø§ÙØ© Ù…Ø³ØªØ­Ø®Ø¯Ù…ÙŠÙ†Øª
    const users = {
        sami: { password: 'sami4141', name: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…', type: 'admin' },
        Tareq: { password: '123', name: 'Ø¯. Ø£Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ', type: 'instructor' },
        stu1: { password: 'stu', name: 'Ø·Ø§Ù„Ø¨ ', type: 'student' },
        stu2: { password: 'stu', name: 'Ø·Ø§Ù„Ø¨ ', type: 'student' }
    };

    if (users[username] && users[username].password === password) {
        currentUser = { username, ...users[username] };
        // Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¯ÙˆØ± ÙÙŠ Ø§Ù„ÙƒÙˆÙƒÙŠØ²
        setCookie('userRole', currentUser.type, 1); // ØµÙ„Ø§Ø­ÙŠØ© 15 ÙŠÙˆÙ…  (ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡Ø§)
        setCookie('userName', currentUser.name, 1);

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('mainScreen').style.display = 'block';
        document.getElementById('userName').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}`;

        const today = new Date();
        document.getElementById('lectureDate').valueAsDate = today;
        const hours = String(today.getHours()).padStart(2, '0');
        const minutes = String(today.getMinutes()).padStart(2, '0');
        document.getElementById('lectureTime').value = `${hours}:${minutes}`;

        updateDashboard();
        updateStudentsTable();
        applyRolePermissions(); // ØªØ·Ø¨ÙŠÙ‚ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆØ±
        showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
    } else {
        showNotification('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
    }
}

// -------------------- ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù„Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆÙƒÙŠØ² --------------------
function logout() {
    currentUser = null;
    deleteCookie('userRole');
    deleteCookie('userName');
    document.getElementById('loginScreen').style.display = 'block';
    document.getElementById('mainScreen').style.display = 'none';
    showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'success');
}

// -------------------- ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØ­Ù…Ù‘Ù„ Ø§Ù„ØµÙØ­Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙƒÙˆÙƒÙŠ Ù…Ø­ÙÙˆØ¸ --------------------
window.addEventListener('load', function() {
    // Ø¨Ù‚ÙŠØ© ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø¯ÙŠÙƒ â€” ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠÙÙ†ÙÙ‘Ø° Ø¨Ø¹Ø¯ ØªÙ‡ÙŠØ¦Ø© DOM
    applyRolePermissions();
});

    
    
    
    
    </script>
</body>
</html>